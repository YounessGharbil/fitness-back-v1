"use strict";(self.webpackChunkfitness=self.webpackChunkfitness||[]).push([[21],{2021:(Y,C,a)=>{a.r(C),a.d(C,{RoleModule:()=>U});var d=a(6895),l=a(433),f=a(5009),b=a(5808),s=a(805),e=a(8256),m=a(7379),g=a(5849),u=a(5593),_=a(1740),h=a(1989);function x(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"p-checkbox",6),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedAuthorities=i)}),e.qZA(),e.TgZ(2,"label",7),e._uU(3),e.qZA()()}if(2&n){const t=p.$implicit,o=e.oxw();e.xp6(1),e.Q6J("value",t.value)("ngModel",o.selectedAuthorities)("inputId",t.id),e.xp6(1),e.Q6J("for",t.id),e.xp6(1),e.Oqu(t.label)}}let O=(()=>{class n{constructor(t,o){this.roleService=t,this.ref=o,this.newRole={rolename:"",authorities:[]},this.selectedAuthorities=[],this.authorities=[{value:"CONTACTS_MANAGEMENT",label:"Contacts Management",id:"contacts"},{value:"CLIENTS_MANAGEMENT",label:"Clients Management",id:"clients"},{value:"SUBSCRIPTIONS_MANAGEMENT",label:"Subscriptions Management",id:"sub"},{value:"PAYMENTS_MANAGEMENT",label:"Payments Management",id:"pay"},{value:"STAFFS_MANAGEMENT",label:"Staffs Management",id:"staff"},{value:"ROLES_MANAGEMENT",label:"Roles Management",id:"role"},{value:"OBSERVATIONS_MANAGEMENT",label:"Observations Management",id:"observation"},{value:"PACKAGES_MANAGEMENT",label:"Packages Management",id:"package"}]}ngOnInit(){}ngOnDestroy(){this.createRoleSubscription&&this.createRoleSubscription.unsubscribe()}addNewRole(){this.newRole.authorities=this.selectedAuthorities,this.createRoleSubscription=this.roleService.createRole(this.newRole).subscribe({next:t=>{console.log(t),this.ref.close(this.newRole)},error:t=>{console.log(t)},complete:()=>{console.log("task complete")}})}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(m.N),e.Y36(g.E7))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-role"]],decls:6,vars:2,consts:[[1,"role-card"],[1,"input-group"],["pInputText","","name","rolename","placeholder","Nom de r\xf4le",3,"ngModel","ngModelChange"],["class","checkbox",4,"ngFor","ngForOf"],["pButton","","type","button","label","Sauvegarder",3,"click"],[1,"checkbox"],["name","group1",3,"value","ngModel","inputId","ngModelChange"],[3,"for"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"input",2),e.NdJ("ngModelChange",function(c){return i.newRole.rolename=c}),e.qZA()(),e.YNc(4,x,4,5,"div",3),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.addNewRole()}),e.qZA()()()),2&o&&(e.xp6(3),e.Q6J("ngModel",i.newRole.rolename),e.xp6(1),e.Q6J("ngForOf",i.authorities))},dependencies:[d.sg,l._Y,l.Fj,l.JJ,l.JL,l.On,l.F,u.Hq,_.o,h.XZ],styles:[".role-card[_ngcontent-%COMP%]{max-width:100%;height:100%;margin:auto;padding:20px;box-shadow:0 0 10px #0000001a;background-color:#fff}.role-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px}.role-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.role-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{margin-bottom:15px}.role-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:14px}.role-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.role-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;width:25%;background-color:#007bff;color:#fff;border:none;padding:10px;border-radius:5px;cursor:pointer;font-size:16px;transition:background-color .3s}.role-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return n})();function P(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"p-checkbox",6),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedAuthorities=i)}),e.qZA(),e.TgZ(2,"label",7),e._uU(3),e.qZA()()}if(2&n){const t=p.$implicit,o=e.oxw();e.xp6(1),e.Q6J("value",t.value)("ngModel",o.selectedAuthorities)("inputId",t.id),e.xp6(1),e.Q6J("for",t.id),e.xp6(1),e.Oqu(t.label)}}let v=(()=>{class n{constructor(t,o,i,r,c){this.dialogConfig=t,this.roleService=o,this.ref=i,this.messageService=r,this.confirmationService=c,this.selectedAuthorities=[],this.authorities=[{value:"CONTACTS_MANAGEMENT",label:"Contacts Management",id:"contacts"},{value:"CLIENTS_MANAGEMENT",label:"Clients Management",id:"clients"},{value:"SUBSCRIPTIONS_MANAGEMENT",label:"Subscriptions Management",id:"sub"},{value:"PAYMENTS_MANAGEMENT",label:"Payments Management",id:"pay"},{value:"STAFFS_MANAGEMENT",label:"Staffs Management",id:"staff"},{value:"ROLES_MANAGEMENT",label:"Roles Management",id:"role"},{value:"OBSERVATIONS_MANAGEMENT",label:"Observations Management",id:"observation"},{value:"PACKAGES_MANAGEMENT",label:"Packages Management",id:"package"}]}ngOnInit(){this.roleToUpdate=this.dialogConfig.data.Role,console.log(this.roleToUpdate),console.log("*********---***********"),console.log(this.roleToUpdate.authorities),console.log("*********---***********"),this.selectedAuthorities=this.roleToUpdate.authorities}ngOnDestroy(){this.updateRoleSubscription&&this.updateRoleSubscription.unsubscribe()}updateRole(){this.roleToUpdate.authorities=this.selectedAuthorities,this.updateRoleSubscription=this.roleService.updateRole(this.roleToUpdate).subscribe({next:t=>{console.log(t)},error:t=>{console.log(t)},complete:()=>{console.log("task complete")}}),this.ref.close(this.roleToUpdate)}confirmUpdate(){this.confirmationService.confirm({message:"\xcates-vous s\xfbr de vouloir continuer\xa0?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.messageService.add({severity:"info",summary:"Confirm\xe9",detail:"Vous avez accept\xe9"}),this.updateRole()},reject:t=>{switch(t){case s.wB.REJECT:this.messageService.add({severity:"error",summary:"Rejet\xe9e",detail:"Vous avez rejet\xe9"});break;case s.wB.CANCEL:this.messageService.add({severity:"warn",summary:"Annul\xe9",detail:"Vous avez annul\xe9"})}}})}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(g.S),e.Y36(m.N),e.Y36(g.E7),e.Y36(s.ez),e.Y36(s.YP))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-update-role"]],decls:6,vars:2,consts:[[1,"role-card"],[1,"input-group"],["pInputText","","name","rolename","placeholder","Nom de r\xf4le",3,"ngModel","ngModelChange"],["class","checkbox",4,"ngFor","ngForOf"],["pButton","","type","button","label","Sauvegarder",3,"click"],[1,"checkbox"],["name","group1",3,"value","ngModel","inputId","ngModelChange"],[3,"for"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"input",2),e.NdJ("ngModelChange",function(c){return i.roleToUpdate.rolename=c}),e.qZA()(),e.YNc(4,P,4,5,"div",3),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.updateRole()}),e.qZA()()()),2&o&&(e.xp6(3),e.Q6J("ngModel",i.roleToUpdate.rolename),e.xp6(1),e.Q6J("ngForOf",i.authorities))},dependencies:[d.sg,l._Y,l.Fj,l.JJ,l.JL,l.On,l.F,u.Hq,_.o,h.XZ],styles:[".role-card[_ngcontent-%COMP%]{max-width:100%;height:100%;margin:auto;padding:20px;box-shadow:0 0 10px #0000001a;background-color:#fff}.role-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px}.role-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.role-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{margin-bottom:15px}.role-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:14px}.role-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.role-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;width:25%;background-color:#007bff;color:#fff;border:none;padding:10px;border-radius:5px;cursor:pointer;font-size:16px;transition:background-color .3s}.role-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return n})();var M=a(3009),T=a(2137),A=a(4044);function R(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"span")(2,"input",9),e.NdJ("input",function(i){e.CHM(t);const r=e.oxw(),c=e.MAs(2);return e.KtG(c.filterGlobal(r.applyFilterGlobal(i),"contains"))}),e.qZA()(),e.TgZ(3,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),r=e.MAs(2);return e.KtG(i.clear(r))}),e.qZA()()}}function S(n,p){1&n&&(e.TgZ(0,"tr")(1,"th",11)(2,"div",12),e._uU(3," Nom de r\xf4le "),e._UZ(4,"p-columnFilter",13),e.qZA()()())}function N(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"button",14),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.updateRole(r))}),e.qZA()(),e.TgZ(5,"td")(6,"button",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.confirmDelete(r.id))}),e.qZA()()()}if(2&n){const t=p.$implicit;e.xp6(2),e.hij(" ",t.rolename," ")}}function y(n,p){1&n&&(e.TgZ(0,"tr")(1,"td",16),e._uU(2,"Aucun r\xf4le trouv\xe9."),e.qZA()())}function E(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"p-button",17),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.show())}),e.qZA()}}const w=function(){return[5,10,20]},k=function(){return["rolename"]},Z=function(){return{"min-width":"80rem"}},F=function(){return{width:"50vw"}},J=[{path:"",component:(()=>{class n{constructor(t,o,i,r){this.roleService=t,this.dialogService=o,this.messageService=i,this.confirmationService=r}ngOnInit(){this.roleService.loadRoles(),this.rolesSubscription=this.roleService.roles$.subscribe(t=>{this.roles=t})}ngOnDestroy(){this.deleteRoleSubscription&&this.deleteRoleSubscription.unsubscribe(),this.rolesSubscription&&this.rolesSubscription.unsubscribe()}clear(t){t.clear()}applyFilterGlobal(t){return t.target.value}show(){this.ref=this.dialogService.open(O,{header:"Cr\xe9er un r\xf4le",width:"70vw",height:"50vw",modal:!0,contentStyle:{overflow:"auto"},maximizable:!0})}updateRole(t){this.ref=this.dialogService.open(v,{data:{Role:t},header:" Modifier un r\xf4le",width:"70vw",height:"50vw",modal:!0,contentStyle:{overflow:"auto"},maximizable:!0})}deleteRole(t){this.deleteRoleSubscription=this.roleService.deleteRole(t).subscribe({next:o=>{console.log(o)},error:o=>{console.log(o)},complete:()=>{console.log("task complete")}})}confirmDelete(t){this.confirmationService.confirm({message:"Voulez-vous supprimer cet enregistrement ?",header:"Confirmation de suppression",icon:"pi pi-info-circle",accept:()=>{this.deleteRole(t),this.messageService.add({severity:"info",summary:"Confirm\xe9",detail:"Enregistrement supprim\xe9"})},reject:o=>{switch(o){case s.wB.REJECT:this.messageService.add({severity:"error",summary:"Rejet\xe9e",detail:"Vous avez rejet\xe9"});break;case s.wB.CANCEL:this.messageService.add({severity:"warn",summary:"Annul\xe9",detail:"Vous avez annul\xe9"})}}})}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(m.N),e.Y36(g.xA),e.Y36(s.ez),e.Y36(s.YP))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-role"]],decls:10,vars:14,consts:[[1,"card"],["dataKey","id","currentPageReportTemplate","Affichage du {first} au {last} des {totalRecords} entr\xe9es","columnResizeMode","expand","styleClass","p-datatable-gridlines",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","paginator","globalFilterFields","resizableColumns","tableStyle"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","paginatorleft"],[1,"flex"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined",3,"click"],[2,"min-width","60rem"],[1,"flex","align-items-center"],["type","text","field","rolename","display","menu"],["pButton","","type","button","icon","pi pi-pencil",3,"click"],["pButton","","type","button","icon","pi pi-trash",3,"click"],["colspan","7"],["type","button","icon","pi pi-plus","styleClass","p-button-text",3,"click"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"p-table",1,2),e.YNc(3,R,4,0,"ng-template",3),e.YNc(4,S,5,0,"ng-template",4),e.YNc(5,N,7,1,"ng-template",5),e.YNc(6,y,3,0,"ng-template",6),e.YNc(7,E,1,0,"ng-template",7),e.qZA()(),e._UZ(8,"p-toast")(9,"p-confirmDialog")),2&o&&(e.xp6(1),e.Q6J("value",i.roles)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(10,w))("paginator",!0)("globalFilterFields",e.DdM(11,k))("resizableColumns",!0)("tableStyle",e.DdM(12,Z)),e.xp6(8),e.Akn(e.DdM(13,F)))},dependencies:[M.iA,s.jx,M.xl,u.Hq,u.zx,_.o,T.Q,A.FN],styles:[".flex[_ngcontent-%COMP%]{display:flex;align-items:center}.flex[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.flex[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px;font-size:16px;border:1px solid #ddd;border-radius:5px;width:250px;box-shadow:0 0 5px #0000001a}.flex[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.card[_ngcontent-%COMP%]{margin:20px;padding:20px;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;background-color:#fff}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]{width:100%;margin-top:20px}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-header[_ngcontent-%COMP%]{background-color:#f2f2f2;border-bottom:1px solid #ddd}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-header[_ngcontent-%COMP%]   .p-column-title[_ngcontent-%COMP%]{font-weight:700}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-header[_ngcontent-%COMP%]   .p-paginator[_ngcontent-%COMP%]{margin-top:10px}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]   .p-input-icon-left[_ngcontent-%COMP%]{position:relative}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]   .p-input-icon-left[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%)}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]   .p-input-icon-left[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:30px}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #ccc}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}"]})}return n})()}];let G=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[d.ez,b.Bz.forChild(J)]})}return n})(),U=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[d.ez,l.u5,f.g,G]})}return n})()}}]);