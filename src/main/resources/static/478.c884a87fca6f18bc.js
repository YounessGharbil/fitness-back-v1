"use strict";(self.webpackChunkfitness=self.webpackChunkfitness||[]).push([[478],{7478:(H,g,i)=>{i.r(g),i.d(g,{StaffModule:()=>G});var m=i(6895),c=i(433),_=i(5009),M=i(5808),l=i(805),t=i(8256),x=i(1135),h=i(8505),O=i(4854),P=i(529);let u=(()=>{class o{constructor(e){this.http=e,this.baseURL=`${O._}/Staff`,this.staffsSubject=new x.X([]),this.staffs$=this.staffsSubject.asObservable()}ngOnInit(){}loadStaffs(){this.http.get(`${this.baseURL}`).subscribe({next:e=>{console.log(e),this.staffsSubject.next(e)},error:e=>{console.log(e)},complete:()=>{console.log("task complete")}})}updateStaffs(e){this.staffsSubject.next(e)}createStaff(e){return this.http.post(`${this.baseURL}`,e).pipe((0,h.b)(n=>{const s=[...this.staffsSubject.value,n];this.updateStaffs(s)}))}updateStaff(e){return this.http.put(`${this.baseURL}/${e.id}`,e)}deleteStaff(e){return this.http.delete(`${this.baseURL}/${e}`).pipe((0,h.b)(()=>{const a=this.staffsSubject.value.filter(s=>s.id!==e);this.updateStaffs(a)}))}getStaff(e){return this.http.get(`${this.baseURL}/${e}`)}getStaffs(){return this.http.get(`${this.baseURL}`)}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(P.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var f=i(5849),y=i(799),C=i(7379),d=i(5593),w=i(3631),b=i(9733),S=i(3608);let T=(()=>{class o{constructor(e,n,a,s){this.staffService=e,this.ref=n,this.contactService=a,this.roleService=s,this.newStaff={contact:null,rolename:""}}ngOnInit(){this.contactService.loadContacts(),this.contactsSubscription=this.contactService.contacts$.subscribe(e=>{this.allContacts=e,this.contactSuggestions=this.allContacts.map(n=>`${n.nom} ${n.prenom}`),console.log(this.contactSuggestions)}),this.roleService.loadRoles(),this.rolesSubscription=this.roleService.roles$.subscribe(e=>{this.allRoles=e}),console.log(this.allRoles)}ngOnDestroy(){this.createStaffSubscription&&this.createStaffSubscription.unsubscribe(),this.contactsSubscription&&this.contactsSubscription.unsubscribe(),this.rolesSubscription&&this.rolesSubscription.unsubscribe()}addNewStaff(){const e=this.allContacts.find(n=>`${n.nom} ${n.prenom}`===this.selectedContact);this.newStaff.contact=e,this.newStaff.rolename=this.selectedRole.rolename,this.createStaffSubscription=this.staffService.createStaff(this.newStaff).subscribe({next:n=>{console.log(n),this.ref.close(this.newStaff)},error:n=>{console.log(n)},complete:()=>{console.log("task complete")}})}search(e){const n=e.query;this.contactSuggestions=this.allContacts.filter(a=>a.nom.toLowerCase().startsWith(n.toLowerCase())||a.prenom.toLowerCase().startsWith(n.toLowerCase())).map(a=>`${a.nom} ${a.prenom}`)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(u),t.Y36(f.E7),t.Y36(y.y),t.Y36(C.N))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-staff"]],decls:9,vars:4,consts:[[1,"card"],[1,"input"],[1,"p-fluid"],["pTooltip","S\xe9lectionnez le contact","name","selectedContact","placeholder","S\xe9lectionnez le contact",3,"ngModel","suggestions","ngModelChange","completeMethod"],["pTooltip","S\xe9lectionnez un r\xf4le","name","selectedRole","optionLabel","rolename","placeholder","S\xe9lectionnez un r\xf4le",3,"options","ngModel","ngModelChange"],["pButton","","type","button","label","Sauvegarder",3,"click"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"span",2)(4,"p-autoComplete",3),t.NdJ("ngModelChange",function(r){return a.selectedContact=r})("completeMethod",function(r){return a.search(r)}),t.qZA()()(),t.TgZ(5,"div",1)(6,"span",2)(7,"p-dropdown",4),t.NdJ("ngModelChange",function(r){return a.selectedRole=r}),t.qZA()()(),t.TgZ(8,"button",5),t.NdJ("click",function(){return a.addNewStaff()}),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("ngModel",a.selectedContact)("suggestions",a.contactSuggestions),t.xp6(3),t.Q6J("options",a.allRoles)("ngModel",a.selectedRole))},dependencies:[c._Y,c.JJ,c.JL,c.On,c.F,d.Hq,w.Qc,b.Lt,S.u],styles:[".card[_ngcontent-%COMP%]{max-width:100%;margin:0 auto;padding:20px;box-shadow:0 0 100% #0000001a;background-color:#fff;height:100%}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.p-autoComplete[_ngcontent-%COMP%], .p-dropdown[_ngcontent-%COMP%]{width:100%}.input[_ngcontent-%COMP%]{margin-top:1rem}button[_ngcontent-%COMP%]{margin-top:1%;width:25%;background-color:#007bff;color:#fff;border:none;border-radius:5px;padding:12px;cursor:pointer;font-size:16px;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return o})(),Z=(()=>{class o{constructor(e,n,a,s,r,I){this.dialogConfig=e,this.staffService=n,this.ref=a,this.messageService=s,this.confirmationService=r,this.roleService=I}ngOnInit(){this.staffToUpdate=this.dialogConfig.data.Staff,console.log(this.staffToUpdate),this.roleService.loadRoles(),this.rolesSubscription=this.roleService.roles$.subscribe(e=>{this.allRoles=e}),console.log(this.allRoles)}ngOnDestroy(){this.updateStaffSubscription&&this.updateStaffSubscription.unsubscribe(),this.rolesSubscription&&this.rolesSubscription.unsubscribe()}updateStaff(){this.staffToUpdate.rolename=this.selectedRole.rolename,this.updateStaffSubscription=this.staffService.updateStaff(this.staffToUpdate).subscribe({next:e=>{console.log(e)},error:e=>{console.log(e)},complete:()=>{console.log("task complete")}}),this.ref.close(this.staffToUpdate)}confirmUpdate(){this.confirmationService.confirm({message:"\xcates-vous s\xfbr de vouloir continuer\xa0?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.messageService.add({severity:"info",summary:"Confirm\xe9",detail:"Vous avez accept\xe9"}),this.updateStaff()},reject:e=>{switch(e){case l.wB.REJECT:this.messageService.add({severity:"error",summary:"Rejet\xe9e",detail:"Vous avez rejet\xe9"});break;case l.wB.CANCEL:this.messageService.add({severity:"warn",summary:"Annul\xe9",detail:"Vous avez annul\xe9"})}}})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(f.S),t.Y36(u),t.Y36(f.E7),t.Y36(l.ez),t.Y36(l.YP),t.Y36(C.N))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-staff"]],decls:6,vars:2,consts:[[1,"card"],[1,"input"],[1,"p-fluid"],["pTooltip","S\xe9lectionnez un r\xf4le","name","selectedRole","optionLabel","rolename","placeholder","S\xe9lectionnez un r\xf4le",3,"options","ngModel","ngModelChange"],["pButton","","type","button","label","Sauvegarder",3,"click"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"span",2)(4,"p-dropdown",3),t.NdJ("ngModelChange",function(r){return a.selectedRole=r}),t.qZA()()(),t.TgZ(5,"button",4),t.NdJ("click",function(){return a.updateStaff()}),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("options",a.allRoles)("ngModel",a.selectedRole))},dependencies:[c._Y,c.JJ,c.JL,c.On,c.F,d.Hq,b.Lt,S.u],styles:[".card[_ngcontent-%COMP%]{max-width:40rem;margin:0 auto;padding:20px;border-radius:10px;box-shadow:0 0 20px #0000001a;background-color:#fff;height:15rem}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.p-autoComplete[_ngcontent-%COMP%], .p-dropdown[_ngcontent-%COMP%]{width:100%}.input[_ngcontent-%COMP%]{margin-top:1rem}button[_ngcontent-%COMP%]{margin-top:1%;width:25%;background-color:#007bff;color:#fff;border:none;border-radius:5px;padding:12px;cursor:pointer;font-size:16px;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return o})();var R=i(3146),v=i(3009),A=i(1740),z=i(2137),F=i(4044);function U(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"div",8)(1,"span")(2,"input",9),t.NdJ("input",function(a){t.CHM(e);const s=t.oxw(),r=t.MAs(2);return t.KtG(r.filterGlobal(s.applyFilterGlobal(a),"contains"))}),t.qZA()(),t.TgZ(3,"button",10),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),s=t.MAs(2);return t.KtG(a.clear(s))}),t.qZA()()}}function Y(o,p){1&o&&(t.TgZ(0,"tr")(1,"th",11)(2,"div",12),t._uU(3," Contact "),t._UZ(4,"p-columnFilter",13),t.qZA()(),t.TgZ(5,"th",14)(6,"div",12),t._uU(7," Gym_Id "),t._UZ(8,"p-columnFilter",15),t.qZA()()())}function J(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"button",16),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.updateStaff(s))}),t.qZA()(),t.TgZ(7,"td")(8,"button",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.confirmDelete(s.id))}),t.qZA()()()}if(2&o){const e=p.$implicit;t.xp6(2),t.AsE(" ",e.contact.nom," ",e.contact.prenom," "),t.xp6(2),t.hij(" ",e.gymId," ")}}function $(o,p){1&o&&(t.TgZ(0,"tr")(1,"td",18),t._uU(2,"Aucun personnel trouv\xe9."),t.qZA()())}function N(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.show())}),t.qZA()}}const k=function(){return[5,10,20]},E=function(){return["contact.prenom","contact.nom"]},L=function(){return{"min-width":"80rem"}},j=function(){return{width:"50vw"}},B=[{path:"",component:(()=>{class o{constructor(e,n,a,s){this.staffService=e,this.dialogService=n,this.messageService=a,this.confirmationService=s,this.loading=!0}ngOnInit(){this.staffService.loadStaffs(),this.StaffsSubscription=this.staffService.staffs$.subscribe(e=>{this.staffs=e,this.loading=!1})}ngOnDestroy(){this.deleteStaffSubscription&&this.deleteStaffSubscription.unsubscribe(),this.StaffsSubscription&&this.StaffsSubscription.unsubscribe()}clear(e){e.clear()}applyFilterGlobal(e){return e.target.value}show(){this.ref=this.dialogService.open(T,{header:"Cr\xe9er un personnel",width:"70vw",height:"50vw",modal:!0,contentStyle:{overflow:"auto"},maximizable:!0})}updateStaff(e){this.ref=this.dialogService.open(Z,{data:{Staff:e},header:" Modifier un personnel ",width:"70vw",height:"50vw",modal:!0,contentStyle:{overflow:"auto"},maximizable:!0})}deleteStaff(e){this.deleteStaffSubscription=this.staffService.deleteStaff(e).subscribe({next:n=>{console.log(n)},error:n=>{console.log(n)},complete:()=>{console.log("task complete")}})}confirmDelete(e){this.confirmationService.confirm({message:"Voulez-vous supprimer cet enregistrement ?",header:"Confirmation de suppression",icon:"pi pi-info-circle",accept:()=>{this.deleteStaff(e),this.messageService.add({severity:"info",summary:"Confirm\xe9",detail:"Enregistrement supprim\xe9"})},reject:n=>{switch(n){case l.wB.REJECT:this.messageService.add({severity:"error",summary:"Rejet\xe9e",detail:"Vous avez rejet\xe9"});break;case l.wB.CANCEL:this.messageService.add({severity:"warn",summary:"Annul\xe9",detail:"Vous avez annul\xe9"})}}})}displayContactCard(e){this.ref=this.dialogService.open(R._,{data:{contact:e},header:" Card",width:"70vw",height:"50vw",modal:!0,contentStyle:{overflow:"auto"},maximizable:!0})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(u),t.Y36(f.xA),t.Y36(l.ez),t.Y36(l.YP))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-staff"]],decls:10,vars:15,consts:[[1,"card"],["dataKey","id","currentPageReportTemplate","Affichage du {first} au {last} des {totalRecords} entr\xe9es","columnResizeMode","expand","styleClass","p-datatable-gridlines",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","globalFilterFields","resizableColumns","tableStyle"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","paginatorleft"],[1,"flex"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined",3,"click"],[2,"min-width","20rem"],[1,"flex","align-items-center"],["type","text","field","contact.nom","display","menu"],[2,"min-width","35rem"],["type","text","field","gymId","display","menu"],["pButton","","type","button","icon","pi pi-pencil",3,"click"],["pButton","","type","button","icon","pi pi-trash",3,"click"],["colspan","7"],["type","button","icon","pi pi-plus","styleClass","p-button-text",3,"click"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"p-table",1,2),t.YNc(3,U,4,0,"ng-template",3),t.YNc(4,Y,9,0,"ng-template",4),t.YNc(5,J,9,3,"ng-template",5),t.YNc(6,$,3,0,"ng-template",6),t.YNc(7,N,1,0,"ng-template",7),t.qZA()(),t._UZ(8,"p-toast")(9,"p-confirmDialog")),2&n&&(t.xp6(1),t.Q6J("value",a.staffs)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(11,k))("loading",a.loading)("paginator",!0)("globalFilterFields",t.DdM(12,E))("resizableColumns",!0)("tableStyle",t.DdM(13,L)),t.xp6(8),t.Akn(t.DdM(14,j)))},dependencies:[v.iA,l.jx,v.xl,d.Hq,d.zx,A.o,z.Q,F.FN],styles:[".flex[_ngcontent-%COMP%]{display:flex;align-items:center}.flex[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.flex[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px;font-size:16px;border:1px solid #ddd;border-radius:5px;width:250px;box-shadow:0 0 5px #0000001a}.flex[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.card[_ngcontent-%COMP%]{margin:20px;padding:20px;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;background-color:#fff}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]{width:100%;margin-top:20px}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-header[_ngcontent-%COMP%]{background-color:#f2f2f2;border-bottom:1px solid #ddd}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-header[_ngcontent-%COMP%]   .p-column-title[_ngcontent-%COMP%]{font-weight:700}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-header[_ngcontent-%COMP%]   .p-paginator[_ngcontent-%COMP%]{margin-top:10px}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]   .p-input-icon-left[_ngcontent-%COMP%]{position:relative}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]   .p-input-icon-left[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%)}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]   .p-input-icon-left[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:30px}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #ccc}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}"]})}return o})()}];let D=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[m.ez,M.Bz.forChild(B)]})}return o})(),G=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[m.ez,c.u5,_.g,D]})}return o})()}}]);