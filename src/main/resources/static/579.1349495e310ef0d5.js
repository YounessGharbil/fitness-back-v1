"use strict";(self.webpackChunkfitness=self.webpackChunkfitness||[]).push([[579],{1579:(Et,f,c)=>{c.r(f),c.d(f,{ClientModule:()=>wt});var g=c(6895),d=c(433),A=c(5009),x=c(5808),p=c(805),t=c(8256);let U=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-client"]],decls:2,vars:0,template:function(a,i){1&a&&(t.TgZ(0,"p"),t._uU(1,"create-client works!"),t.qZA())}})}return n})(),q=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-client"]],decls:2,vars:0,template:function(a,i){1&a&&(t.TgZ(0,"p"),t._uU(1,"update-client works!"),t.qZA())}})}return n})();var M=c(3146),O=c(5955),l=c(5849),S=c(1584),m=c(5593),Z=c(4247);function w(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateUser(i.User))}),t.qZA(),t.TgZ(1,"button",3),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.confirmDelete(i.User.id))}),t.qZA()}}const E=function(){return{width:"300px"}};let k=(()=>{class n{constructor(e,a,i,r,s){this.dialogConfig=e,this.UserService=a,this.dialogService=i,this.messageService=r,this.confirmationService=s}ngOnInit(){this.User=this.dialogConfig.data.user,console.log(this.User)}updateUser(e){this.ref=this.dialogService.open(O.j,{data:{User:e},header:" Update User"})}deleteUser(e){this.deleteUserSubscription=this.UserService.deleteUser(e).subscribe({next:a=>{console.log(a)},error:a=>{console.log(a)},complete:()=>{console.log("task complete")}})}confirmDelete(e){this.confirmationService.confirm({message:"Do you want to delete this record?",header:"Delete Confirmation",icon:"pi pi-info-circle",accept:()=>{this.deleteUser(e),this.messageService.add({severity:"info",summary:"Confirmed",detail:"Record deleted"})},reject:a=>{switch(a){case p.wB.REJECT:this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected"});break;case p.wB.CANCEL:this.messageService.add({severity:"warn",summary:"Cancelled",detail:"You have cancelled"})}}})}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(l.S),t.Y36(S.K),t.Y36(l.xA),t.Y36(p.ez),t.Y36(p.YP))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-card"]],decls:13,vars:5,consts:[[1,"card"],["pTemplate","footer"],["pButton","","type","button","label","Edit","icon","pi pi-pencil",1,"p-button-warning",3,"click"],["pButton","","type","button","label","Delete","icon","pi pi-trash",1,"p-button-danger",3,"click"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"p-card")(2,"p")(3,"strong"),t._uU(4,"user name"),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"small"),t._uU(7),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"small"),t._uU(10),t.qZA(),t._UZ(11,"br"),t.qZA(),t.YNc(12,w,2,0,"ng-template",1),t.qZA()()),2&a&&(t.xp6(1),t.Akn(t.DdM(4,E)),t.xp6(6),t.Oqu(i.User.email),t.xp6(3),t.Oqu(i.User.role))},dependencies:[p.jx,m.Hq,Z.Z]})}return n})();var D=c(4092),N=c(6091);function Y(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateSubscription(i.subscription))}),t.qZA(),t.TgZ(1,"button",3),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.confirmDelete(i.subscription.id))}),t.qZA()}}const J=function(){return{width:"300px"}};let F=(()=>{class n{constructor(e,a,i,r,s){this.dialogConfig=e,this.subscriptionService=a,this.dialogService=i,this.messageService=r,this.confirmationService=s}ngOnInit(){this.subscription=this.dialogConfig.data.sub,console.log(this.subscription)}updateSubscription(e){this.ref=this.dialogService.open(D.a,{data:{sub:e},header:" Update Subscription"})}deleteSubscription(e){this.deleteSubSubscription=this.subscriptionService.deleteSubscription(e).subscribe({next:a=>{console.log(a)},error:a=>{console.log(a)},complete:()=>{console.log("task complete")}})}confirmDelete(e){this.confirmationService.confirm({message:"Do you want to delete this record?",header:"Delete Confirmation",icon:"pi pi-info-circle",accept:()=>{this.deleteSubscription(e),this.messageService.add({severity:"info",summary:"Confirmed",detail:"Record deleted"})},reject:a=>{switch(a){case p.wB.REJECT:this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected"});break;case p.wB.CANCEL:this.messageService.add({severity:"warn",summary:"Cancelled",detail:"You have cancelled"})}}})}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(l.S),t.Y36(N.F),t.Y36(l.xA),t.Y36(p.ez),t.Y36(p.YP))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-subscription-card"]],decls:23,vars:10,consts:[[1,"card"],["pTemplate","footer"],["pButton","","type","button","label","Edit","icon","pi pi-pencil",1,"p-button-warning",3,"click"],["pButton","","type","button","label","Delete","icon","pi pi-trash",1,"p-button-danger",3,"click"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"p-card")(2,"p")(3,"strong"),t._uU(4),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"small"),t._uU(7),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"small"),t._uU(10),t.qZA(),t._UZ(11,"br"),t.TgZ(12,"small"),t._uU(13),t.qZA(),t.TgZ(14,"small"),t._uU(15),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"small"),t._uU(18),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"small"),t._uU(21),t.qZA()(),t.YNc(22,Y,2,0,"ng-template",1),t.qZA()()),2&a&&(t.xp6(1),t.Akn(t.DdM(9,J)),t.xp6(3),t.Oqu(i.subscription.subscribedContact_id),t.xp6(3),t.Oqu(i.subscription.subscribedPackage_id),t.xp6(3),t.Oqu(i.subscription.startDate),t.xp6(3),t.Oqu(i.subscription.endDate),t.xp6(2),t.Oqu(i.subscription.status),t.xp6(3),t.Oqu(i.subscription.discount),t.xp6(3),t.Oqu(i.subscription.priceAfterDiscount))},dependencies:[p.jx,m.Hq,Z.Z]})}return n})();var u=(()=>{return(n=u||(u={})).CASH="CASH",n.CHECK="CHECK",n.CARD="CARD",u;var n})(),H=c(9733),_=c(6894),h=c(158);let I=(()=>{class n{constructor(e,a,i){this.paymentService=e,this.ref=a,this.dialogService=i,this.cashPayment={paymentTranche:null,paymentMethod:u.CASH,amount:null,paymentDate:null,subscriptionid:null,paymentHandler:""}}ngOnInit(){this.cashPayment.paymentDate=(new Date).toISOString(),this.cashPayment.amount=this.payment.amount,this.cashPayment.paymentTranche=this.payment.paymentTranche,this.cashPayment.subscriptionid=this.payment.subscriptionid,this.cashPayment.paymentHandler=this.payment.paymentHandler}createCashPayment(){this.paymentService.createCashPayment(this.cashPayment).subscribe({next:e=>{console.log(e),this.ref.close(this.cashPayment)},error:e=>{console.log(e)},complete:()=>{this.ref=this.dialogService.open(_.F,{data:{payment:this.cashPayment,client:this.client},header:" invoice ",width:"70vw",height:"50vw",modal:!0,contentStyle:{overflow:"auto"},maximizable:!0})}})}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(h.t),t.Y36(l.E7),t.Y36(l.xA))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-cash-payment"]],inputs:{payment:"payment",client:"client"},decls:1,vars:0,consts:[["pButton","","type","button","label","Cr\xe9er un paiement",3,"click"]],template:function(a,i){1&a&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.createCashPayment()}),t.qZA())},dependencies:[m.Hq]})}return n})();var v=c(3608);let R=(()=>{class n{constructor(e,a,i){this.paymentService=e,this.ref=a,this.dialogService=i,this.checkPayment={paymentTranche:null,paymentMethod:u.CHECK,amount:null,paymentDate:null,checkNumber:null,subscriptionid:null,paymentHandler:""}}ngOnInit(){this.checkPayment.paymentDate=(new Date).toISOString(),this.checkPayment.amount=this.payment.amount,this.checkPayment.paymentTranche=this.payment.paymentTranche,this.checkPayment.subscriptionid=this.payment.subscriptionid,this.checkPayment.paymentHandler=this.payment.paymentHandler}createCheckPayment(){this.paymentService.createCheckPayment(this.checkPayment).subscribe({next:e=>{console.log(e),this.ref.close(this.checkPayment)},error:e=>{console.log(e)},complete:()=>{this.ref=this.dialogService.open(_.F,{data:{payment:this.checkPayment,client:this.client},header:" invoice ",width:"70vw",height:"50vw",modal:!0,contentStyle:{overflow:"auto"},maximizable:!0})}})}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(h.t),t.Y36(l.E7),t.Y36(l.xA))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-check-payment"]],inputs:{payment:"payment",client:"client"},decls:5,vars:1,consts:[[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-book"],["pInputNumber","","pTooltip","Saisir le num\xe9ro de ch\xe8que","name","checkNumber","placeholder","Num\xe9ro de ch\xe8que",3,"ngModel","ngModelChange"],["pButton","","type","button","label","Cr\xe9er un paiement",3,"click"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"span",1),t._UZ(2,"i",2),t.qZA(),t.TgZ(3,"input",3),t.NdJ("ngModelChange",function(s){return i.checkPayment.checkNumber=s}),t.qZA()(),t.TgZ(4,"button",4),t.NdJ("click",function(){return i.createCheckPayment()}),t.qZA()),2&a&&(t.xp6(3),t.Q6J("ngModel",i.checkPayment.checkNumber))},dependencies:[d.Fj,d.JJ,d.On,m.Hq,v.u]})}return n})();var b=c(1740);let j=(()=>{class n{constructor(e,a,i){this.paymentService=e,this.ref=a,this.dialogService=i,this.cardPayment={paymentTranche:null,paymentMethod:u.CARD,amount:null,paymentDate:null,cardCVV:null,cardNumber:null,cardExpirationDate:null,subscriptionid:null,paymentHandler:""}}ngOnInit(){this.cardPayment.paymentDate=(new Date).toISOString(),this.cardPayment.amount=this.payment.amount,this.cardPayment.paymentTranche=this.payment.paymentTranche,this.cardPayment.subscriptionid=this.payment.subscriptionid,this.cardPayment.paymentHandler=this.payment.paymentHandler}createCardPayment(){this.paymentService.createCardPayment(this.cardPayment).subscribe({next:e=>{console.log(e),this.ref.close(this.cardPayment)},error:e=>{console.log(e)},complete:()=>{this.ref=this.dialogService.open(_.F,{data:{payment:this.cardPayment,client:this.client},header:" invoice ",width:"70vw",height:"50vw",modal:!0,contentStyle:{overflow:"auto"},maximizable:!0})}})}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(h.t),t.Y36(l.E7),t.Y36(l.xA))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-card-payment"]],inputs:{payment:"payment",client:"client"},decls:13,vars:3,consts:[[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-book"],["pInputText","","pTooltip","Saisissez le num\xe9ro de la carte","name","cardNumber","placeholder","Saisissez le num\xe9ro de la carte",3,"ngModel","ngModelChange"],["pInputText","","pTooltip","Saisissez CVV","name","cardCVV","placeholder","CVV",3,"ngModel","ngModelChange"],["pInputText","","pTooltip","Saisissez la date d'expiration de la carte","name","cardExpirationDate","placeholder","Date d'expiration de la carte",3,"ngModel","ngModelChange"],["pButton","","type","button","label","Cr\xe9er un paiement",3,"click"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"span",1),t._UZ(2,"i",2),t.qZA(),t.TgZ(3,"input",3),t.NdJ("ngModelChange",function(s){return i.cardPayment.cardNumber=s}),t.qZA()(),t.TgZ(4,"div",0)(5,"span",1),t._UZ(6,"i",2),t.qZA(),t.TgZ(7,"input",4),t.NdJ("ngModelChange",function(s){return i.cardPayment.cardCVV=s}),t.qZA()(),t.TgZ(8,"div",0)(9,"span",1),t._UZ(10,"i",2),t.qZA(),t.TgZ(11,"input",5),t.NdJ("ngModelChange",function(s){return i.cardPayment.cardExpirationDate=s}),t.qZA()(),t.TgZ(12,"button",6),t.NdJ("click",function(){return i.createCardPayment()}),t.qZA()),2&a&&(t.xp6(3),t.Q6J("ngModel",i.cardPayment.cardNumber),t.xp6(4),t.Q6J("ngModel",i.cardPayment.cardCVV),t.xp6(4),t.Q6J("ngModel",i.cardPayment.cardExpirationDate))},dependencies:[d.Fj,d.JJ,d.On,m.Hq,b.o,v.u]})}return n})();function z(n,o){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-cash-payment",7),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("client",e.client)("payment",e.payment)}}function B(n,o){if(1&n&&t._UZ(0,"app-check-payment",7),2&n){const e=t.oxw();t.Q6J("client",e.client)("payment",e.payment)}}function Q(n,o){if(1&n&&t._UZ(0,"app-card-payment",7),2&n){const e=t.oxw();t.Q6J("client",e.client)("payment",e.payment)}}let V=(()=>{class n{constructor(e,a){this.dialogConfig=e,this.ref=a,this.paymentTranche=null,this.payment={paymentTranche:null,paymentMethod:null,amount:this.paymentTranche?this.paymentTranche.amount:null,paymentDate:null,subscriptionid:null,paymentHandler:""},this.paymentMethods=[{label:"Cash",value:u.CASH},{label:"Check",value:u.CHECK},{label:"Card",value:u.CARD}]}ngOnInit(){this.paymentTranche=this.dialogConfig.data.paymentTranche,this.payment.paymentDate=(new Date).toISOString(),this.payment.amount=this.paymentTranche.amount,this.payment.paymentTranche=this.paymentTranche,this.payment.subscriptionid=this.dialogConfig.data.subscriptionid,this.client=this.dialogConfig.data.client,this.payment.paymentHandler=`${localStorage.getItem("Authenticated_User_LastName")} ${localStorage.getItem("Authenticated_User_FirstName")}`}onPaymentMethodChange(e){this.selectedPaymentMetohd=e.value}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(l.S),t.Y36(l.E7))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-payment-transaction"]],decls:12,vars:6,consts:[[1,"card"],[1,"p-fluid","p-formgrid","p-grid"],[1,"p-field","p-col"],["for","amount"],["name","paymentMethod","optionLabel","label","placeholder","S\xe9lectionnez la m\xe9thode de paiement",3,"options","ngModel","ngModelChange"],[4,"ngIf"],[3,"client","payment",4,"ngIf"],[3,"client","payment"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"div",2)(4,"label",3),t._uU(5,"Montant"),t.qZA(),t._uU(6),t.qZA(),t.TgZ(7,"div",2)(8,"p-dropdown",4),t.NdJ("ngModelChange",function(s){return i.payment.paymentMethod=s})("ngModelChange",function(s){return i.onPaymentMethodChange(s)}),t.qZA()(),t.YNc(9,z,2,2,"div",5),t.YNc(10,B,1,2,"app-check-payment",6),t.YNc(11,Q,1,2,"app-card-payment",6),t.qZA()()()),2&a&&(t.xp6(6),t.hij(" ",i.payment.amount," "),t.xp6(2),t.Q6J("options",i.paymentMethods)("ngModel",i.payment.paymentMethod),t.xp6(1),t.Q6J("ngIf","CASH"===i.selectedPaymentMetohd),t.xp6(1),t.Q6J("ngIf","CHECK"===i.selectedPaymentMetohd),t.xp6(1),t.Q6J("ngIf","CARD"===i.selectedPaymentMetohd))},dependencies:[g.O5,d._Y,d.JJ,d.JL,d.On,d.F,H.Lt,I,R,j]})}return n})();var K=c(4853),C=c(3009),T=c(8783),G=c(6679);function X(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"Contact"),t.qZA())}function $(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"Compte d'utilisateur"),t.qZA())}function L(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"Abonnement"),t.qZA())}function W(n,o){1&n&&(t.ynx(0),t._UZ(1,"p-tag",21),t.BQk())}function tt(n,o){1&n&&t._UZ(0,"p-tag",22)}function et(n,o){1&n&&(t.TgZ(0,"tr")(1,"th",23),t._uU(2,"eventType"),t.qZA(),t.TgZ(3,"th",23),t._uU(4,"eventDate"),t.qZA(),t.TgZ(5,"th",23),t._uU(6,"startDate"),t.qZA(),t.TgZ(7,"th",23),t._uU(8,"endDate"),t.qZA()())}function nt(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.eventType),t.xp6(2),t.Oqu(e.eventTimestamp),t.xp6(2),t.Oqu(e.startDate),t.xp6(2),t.Oqu(e.endDate)}}function it(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"Tranches non pay\xe9es"),t.qZA())}function at(n,o){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"montant"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Date d'\xe9ch\xe9ance"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"tranche pay\xe9e"),t.qZA()())}function ot(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"p-button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.pay(i))}),t.qZA()()()}if(2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.amount),t.xp6(2),t.Oqu(e.dueDate),t.xp6(2),t.Oqu(e.tranchePaid)}}function ct(n,o){1&n&&t.YNc(0,ot,9,3,"tr",18),2&n&&t.Q6J("ngIf",!o.$implicit.tranchePaid)}function rt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"Paiements"),t.qZA())}function st(n,o){1&n&&(t.TgZ(0,"tr")(1,"th",25),t._uU(2,"M\xe9thode de paiement"),t.qZA(),t.TgZ(3,"th",25),t._uU(4,"montant"),t.qZA(),t.TgZ(5,"th",25),t._uU(6,"Date de paiement"),t.qZA(),t.TgZ(7,"th",25),t._uU(8,"Responsable de paiement"),t.qZA()())}function pt(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.paymentMethod),t.xp6(2),t.Oqu(e.amount),t.xp6(2),t.Oqu(e.paymentDate),t.xp6(2),t.Oqu(e.paymentHandler)}}function lt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"Observations"),t.qZA())}function dt(n,o){if(1&n&&(t.TgZ(0,"div",0)(1,"div",4),t._uU(2," Observation cr\xe9\xe9e par\xa0:"),t.qZA(),t.TgZ(3,"div",5),t._uU(4),t.qZA(),t.TgZ(5,"div",4),t._uU(6,"Type de derni\xe8re observation\xa0:"),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA(),t.TgZ(9,"div",4),t._uU(10,"Contenu de la derni\xe8re observation\xa0:"),t.qZA(),t.TgZ(11,"div",5),t._uU(12),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.hij(" ",e.observations[e.observations.length-1].createdBy," "),t.xp6(4),t.hij(" ",e.observations[e.observations.length-1].observationType," "),t.xp6(4),t.hij(" ",e.observations[e.observations.length-1].content," ")}}function ut(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1," Aucune observation disponible. "),t.qZA())}function mt(n,o){1&n&&(t.TgZ(0,"tr")(1,"th",25),t._uU(2,"Cr\xe9\xe9 par"),t.qZA(),t.TgZ(3,"th",25),t._uU(4,"Type d'observation"),t.qZA(),t.TgZ(5,"th",25),t._uU(6,"Contenu"),t.qZA()())}function gt(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.createdBy),t.xp6(2),t.Oqu(e.observationType),t.xp6(2),t.Oqu(e.content)}}function ht(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"Visites"),t.qZA())}const P=function(){return{"min-width":"45rem"}},y=function(){return[5]},_t=function(){return{"min-width":"50rem"}},Ct=function(){return{"min-width":"72rem"}};let yt=(()=>{class n{constructor(e,a,i){this.dialogConfig=e,this.dialogService=a,this.paymentService=i}ngOnInit(){this.client=this.dialogConfig.data.client,this.tranches=this.client.subscription.paymentMode.paymentTranches,this.payments=this.client.subscription.payments,this.observations=this.client.observations,this.subscriptionEvents=this.client.subscription.subscriptionEvents}pay(e){this.ref=this.dialogService.open(V,{data:{paymentTranche:e,subscriptionid:this.client.subscription.id,client:this.client},header:"Create Payment Transaction",width:"50vw",height:"50vw",modal:!0,contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0}),this.ref.onClose.subscribe(()=>{this.updatePaymentTranchesList(e)})}updatePaymentTranchesList(e){this.tranches=this.tranches.filter(a=>a!==e),this.paymentService.updatePaymentTranches(this.tranches)}addObservation(){this.ref=this.dialogService.open(K.U,{data:{client:this.client},header:"Create Observation",width:"70vw",height:"50vw",modal:!0,contentStyle:{overflow:"auto"},maximizable:!0})}showSubscriptionEvents(){console.log(this.client.observations)}updateSubscription(){}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(l.S),t.Y36(l.xA),t.Y36(h.t))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-client-card"]],decls:113,vars:46,consts:[[1,"card"],["styleClass","tabview-custom"],["pTemplate","header"],[1,"info-section"],[1,"field"],[1,"data"],[1,"subscription-section"],[1,"left-section"],[4,"ngIf","ngIfElse"],["blockedTag",""],[1,"right-section"],[1,"subscription-events"],["currentPageReportTemplate","Affichage du {first} au {last} des {totalRecords} entr\xe9es",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","body"],[3,"value","tableStyle"],[1,"observation-section"],["pButton","","type","button","icon","pi pi-plus",1,"add-button",3,"click"],["class","card",4,"ngIf"],[4,"ngIf"],["pButton","","type","button","icon","pi pi-list",1,"show-observations",3,"click"],[1,"observations"],["severity","success","value","Actif"],["severity","danger","value","bloqu\xe9"],[2,"width","20%"],["label","Payer",3,"click"],[2,"width","15%"]],template:function(a,i){if(1&a&&(t.TgZ(0,"div",0)(1,"p-tabView",1)(2,"p-tabPanel"),t.YNc(3,X,2,0,"ng-template",2),t.TgZ(4,"div",3)(5,"div",4),t._uU(6,"Nom et pr\xe9nom:"),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA(),t.TgZ(9,"div",4),t._uU(10,"Date de naissance:"),t.qZA(),t.TgZ(11,"div",5),t._uU(12),t.qZA(),t.TgZ(13,"div",4),t._uU(14,"Sexe:"),t.qZA(),t.TgZ(15,"div",5),t._uU(16),t.qZA(),t.TgZ(17,"div",4),t._uU(18,"Adresse:"),t.qZA(),t.TgZ(19,"div",5),t._uU(20),t.qZA(),t.TgZ(21,"div",4),t._uU(22,"Ville:"),t.qZA(),t.TgZ(23,"div",5),t._uU(24),t.qZA(),t.TgZ(25,"div",4),t._uU(26,"T\xe9l:"),t.qZA(),t.TgZ(27,"div",5),t._uU(28),t.qZA(),t.TgZ(29,"div",4),t._uU(30,"Email:"),t.qZA(),t.TgZ(31,"div",5),t._uU(32),t.qZA()()(),t.TgZ(33,"p-tabPanel"),t.YNc(34,$,2,0,"ng-template",2),t.TgZ(35,"div",3)(36,"div",4),t._uU(37,"Email:"),t.qZA(),t.TgZ(38,"div",5),t._uU(39),t.qZA(),t.TgZ(40,"div",4),t._uU(41,"R\xf4le:"),t.qZA(),t.TgZ(42,"div",5),t._uU(43),t.qZA()()(),t.TgZ(44,"p-tabPanel"),t.YNc(45,L,2,0,"ng-template",2),t.TgZ(46,"div",6)(47,"div",7)(48,"div",3)(49,"div",4),t._uU(50,"Forfait:"),t.qZA(),t.TgZ(51,"div",5),t._uU(52),t.qZA(),t.TgZ(53,"div",4),t._uU(54,"Date de d\xe9but:"),t.qZA(),t.TgZ(55,"div",5),t._uU(56),t.qZA(),t.TgZ(57,"div",4),t._uU(58,"Date de fin:"),t.qZA(),t.TgZ(59,"div",5),t._uU(60),t.qZA(),t.TgZ(61,"div",4),t._uU(62,"Remise:"),t.qZA(),t.TgZ(63,"div",5),t._uU(64),t.qZA(),t.TgZ(65,"div",4),t._uU(66,"Prix apr\xe8s remise:"),t.qZA(),t.TgZ(67,"div",5),t._uU(68),t.qZA(),t.TgZ(69,"div",4),t._uU(70,"Statut:"),t.qZA(),t.TgZ(71,"div",5),t.YNc(72,W,2,0,"ng-container",8),t.YNc(73,tt,1,0,"ng-template",null,9,t.W1O),t.qZA()()(),t.TgZ(75,"div",10)(76,"div",11)(77,"div",0)(78,"p-table",12),t.YNc(79,et,9,0,"ng-template",2),t.YNc(80,nt,9,4,"ng-template",13),t.qZA()()()()()(),t.TgZ(81,"p-tabPanel"),t.YNc(82,it,2,0,"ng-template",2),t.TgZ(83,"div",0)(84,"p-table",14),t.YNc(85,at,7,0,"ng-template",2),t.YNc(86,ct,1,1,"ng-template",13),t.qZA()()(),t.TgZ(87,"p-tabPanel"),t.YNc(88,rt,2,0,"ng-template",2),t.TgZ(89,"div",3)(90,"div",0)(91,"p-table",12),t.YNc(92,st,9,0,"ng-template",2),t.YNc(93,pt,9,4,"ng-template",13),t.qZA()()()(),t.TgZ(94,"p-tabPanel"),t.YNc(95,lt,2,0,"ng-template",2),t.TgZ(96,"div",15)(97,"div",7)(98,"button",16),t.NdJ("click",function(){return i.addObservation()}),t.qZA(),t.TgZ(99,"div",3),t.YNc(100,dt,13,3,"div",17),t.YNc(101,ut,2,0,"div",18),t.qZA()(),t.TgZ(102,"div",10)(103,"button",19),t.NdJ("click",function(){return i.showSubscriptionEvents()}),t._uU(104,"All Observations"),t.qZA(),t.TgZ(105,"div",20)(106,"div",0)(107,"p-table",12),t.YNc(108,mt,7,0,"ng-template",2),t.YNc(109,gt,7,3,"ng-template",13),t.qZA()()()()()(),t.TgZ(110,"p-tabPanel"),t.YNc(111,ht,2,0,"ng-template",2),t._UZ(112,"div",3),t.qZA()()()),2&a){const r=t.MAs(74);t.xp6(8),t.AsE("",i.client.contact.nom," ",i.client.contact.prenom,""),t.xp6(4),t.Oqu(i.client.contact.dateNaissance),t.xp6(4),t.Oqu(i.client.contact.sexe),t.xp6(4),t.Oqu(i.client.contact.adresse),t.xp6(4),t.Oqu(i.client.contact.ville),t.xp6(4),t.Oqu(i.client.contact.tel),t.xp6(4),t.Oqu(i.client.contact.email),t.xp6(7),t.Oqu(i.client.contact.email),t.xp6(4),t.Oqu(i.client.userAccount.role.rolename),t.xp6(9),t.Oqu(i.client.subscription.subscribedPackage.packageName),t.xp6(4),t.Oqu(i.client.subscription.startDate),t.xp6(4),t.Oqu(i.client.subscription.endDate),t.xp6(4),t.Oqu(i.client.subscription.discount),t.xp6(4),t.Oqu(i.client.subscription.priceAfterDiscount),t.xp6(4),t.Q6J("ngIf","active"===i.client.subscription.status)("ngIfElse",r),t.xp6(6),t.Q6J("value",i.subscriptionEvents)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("tableStyle",t.DdM(39,P))("rowsPerPageOptions",t.DdM(40,y)),t.xp6(6),t.Q6J("value",i.tranches)("tableStyle",t.DdM(41,_t)),t.xp6(7),t.Q6J("value",i.client.subscription.payments)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("tableStyle",t.DdM(42,Ct))("rowsPerPageOptions",t.DdM(43,y)),t.xp6(9),t.Q6J("ngIf",i.observations&&i.observations.length>0),t.xp6(1),t.Q6J("ngIf",i.observations&&0===i.observations.length),t.xp6(6),t.Q6J("value",i.observations)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("tableStyle",t.DdM(44,P))("rowsPerPageOptions",t.DdM(45,y))}},dependencies:[g.O5,C.iA,p.jx,m.Hq,m.zx,T.xf,T.x4,G.V],styles:[".card[_ngcontent-%COMP%]{max-width:100%}.card[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,max-content);gap:10px}.card[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{color:#3498db;font-weight:700}.card[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{color:#000}.observation-section[_ngcontent-%COMP%], .subscription-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.left-section[_ngcontent-%COMP%]{width:40%}.right-section[_ngcontent-%COMP%]{width:58%}.info-section[_ngcontent-%COMP%], .observations[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;border:1px solid #ccc}.add-button[_ngcontent-%COMP%], .show-observations[_ngcontent-%COMP%]{margin-top:1rem}.subscription-events[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;border:1px solid #ccc;width:100%}"]})}return n})();var ft=c(5599),Zt=c(2137),vt=c(4044);function bt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",7)(1,"span")(2,"input",8),t.NdJ("input",function(i){t.CHM(e);const r=t.oxw(),s=t.MAs(2);return t.KtG(s.filterGlobal(r.applyFilterGlobal(i),"contains"))}),t.qZA()(),t.TgZ(3,"button",9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),r=t.MAs(2);return t.KtG(i.clear(r))}),t.qZA()()}}function Tt(n,o){1&n&&(t.TgZ(0,"tr")(1,"th",10)(2,"div",11),t._uU(3," Contact "),t._UZ(4,"p-columnFilter",12),t.qZA()(),t.TgZ(5,"th",10)(6,"div",11),t._uU(7," Compte d'utilisateur "),t._UZ(8,"p-columnFilter",13),t.qZA()(),t.TgZ(9,"th",14)(10,"div",11),t._uU(11," Abonnement "),t._UZ(12,"p-columnFilter",15),t.qZA()(),t.TgZ(13,"th",16)(14,"div",11),t._uU(15," Gym_Id "),t._UZ(16,"p-columnFilter",17),t.qZA()()())}function Pt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr",18),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.displayClientCard(r))}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.AsE(" ",e.contact.nom," ",e.contact.prenom," "),t.xp6(2),t.hij(" ",e.userAccount.email," "),t.xp6(2),t.hij(" ",e.subscription.status," "),t.xp6(2),t.hij(" ",e.gymid," ")}}function At(n,o){1&n&&(t.TgZ(0,"tr")(1,"td",19),t._uU(2,"Aucun client trouv\xe9."),t.qZA()())}const xt=function(){return[5,10,20]},Ut=function(){return["contact.nom","contact.prenom","subscription.status"]},qt=function(){return{"min-width":"80rem"}},Mt=function(){return{width:"50vw"}},Ot=[{path:"",component:(()=>{class n{constructor(e,a,i,r){this.clientService=e,this.dialogService=a,this.messageService=i,this.confirmationService=r,this.loading=!0}ngOnInit(){this.clientsSubscription=this.clientService.getClients().subscribe({next:e=>{this.clients=e,console.log(this.clients)},error:e=>{console.log(e)},complete:()=>{console.log("task complete")}}),this.loading=!1}ngOnDestroy(){this.deleteClientSubscription&&this.deleteClientSubscription.unsubscribe(),this.clientsSubscription&&this.clientsSubscription.unsubscribe()}clear(e){e.clear()}applyFilterGlobal(e){return e.target.value}show(){this.ref=this.dialogService.open(U,{header:"Create Client"})}updateClient(e){this.ref=this.dialogService.open(q,{data:{client:e},header:" Update Client"})}deleteClient(e){this.deleteClientSubscription=this.clientService.deleteClient(e).subscribe({next:a=>{console.log(a)},error:a=>{console.log(a)},complete:()=>{console.log("task complete")}})}confirmDelete(e){this.confirmationService.confirm({message:"Voulez-vous supprimer cet enregistrement ?",header:"Confirmation de suppression",icon:"pi pi-info-circle",accept:()=>{this.deleteClient(e),this.messageService.add({severity:"info",summary:"Confirm\xe9",detail:"Enregistrement supprim\xe9"})},reject:a=>{switch(a){case p.wB.REJECT:this.messageService.add({severity:"error",summary:"Rejet\xe9e",detail:"Vous avez rejet\xe9"});break;case p.wB.CANCEL:this.messageService.add({severity:"warn",summary:"Annul\xe9",detail:"Vous avez annul\xe9"})}}})}displayContactCard(e){this.ref=this.dialogService.open(M._,{data:{contact:e},header:" Card"})}displayUserCard(e){this.ref=this.dialogService.open(k,{data:{user:e},header:"User Card"})}displaySubscriptionCard(e){this.ref=this.dialogService.open(F,{data:{sub:e},header:"Subscription Card"})}displayClientCard(e){this.ref=this.dialogService.open(yt,{data:{client:e},header:"Client Card",width:"70vw",height:"50vw",modal:!0,contentStyle:{overflow:"auto"},maximizable:!0})}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(ft.y),t.Y36(l.xA),t.Y36(p.ez),t.Y36(p.YP))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-client"]],decls:9,vars:15,consts:[[1,"card"],["dataKey","id","currentPageReportTemplate","Affichage du {first} au {last} des {totalRecords} entr\xe9es","columnResizeMode","expand","styleClass","p-datatable-gridlines",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","globalFilterFields","resizableColumns","tableStyle"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined",3,"click"],[2,"min-width","20rem"],[1,"flex","align-items-center"],["type","text","field","contact","display","menu"],["type","text","field","userAccount","display","menu"],[2,"min-width","15rem"],["type","text","field","subscription","display","menu"],[2,"min-width","30rem"],["type","text","field","gymid","display","menu"],[3,"click"],["colspan","7"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"p-table",1,2),t.YNc(3,bt,4,0,"ng-template",3),t.YNc(4,Tt,17,0,"ng-template",4),t.YNc(5,Pt,9,5,"ng-template",5),t.YNc(6,At,3,0,"ng-template",6),t.qZA()(),t._UZ(7,"p-toast")(8,"p-confirmDialog")),2&a&&(t.xp6(1),t.Q6J("value",i.clients)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(11,xt))("loading",i.loading)("paginator",!0)("globalFilterFields",t.DdM(12,Ut))("resizableColumns",!0)("tableStyle",t.DdM(13,qt)),t.xp6(7),t.Akn(t.DdM(14,Mt)))},dependencies:[C.iA,p.jx,C.xl,m.Hq,b.o,Zt.Q,vt.FN],styles:[".flex[_ngcontent-%COMP%]{display:flex;align-items:center}.flex[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.flex[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px;font-size:16px;border:1px solid #ddd;border-radius:5px;width:250px;box-shadow:0 0 5px #0000001a}.flex[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.card[_ngcontent-%COMP%]{margin:20px;padding:20px;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;background-color:#fff}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]{width:100%;margin-top:20px}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-header[_ngcontent-%COMP%]{background-color:#f2f2f2;border-bottom:1px solid #ddd}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-header[_ngcontent-%COMP%]   .p-column-title[_ngcontent-%COMP%]{font-weight:700}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-header[_ngcontent-%COMP%]   .p-paginator[_ngcontent-%COMP%]{margin-top:10px}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]   .p-input-icon-left[_ngcontent-%COMP%]{position:relative}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]   .p-input-icon-left[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%)}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-datatable-caption[_ngcontent-%COMP%]   .p-input-icon-left[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:30px}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #ccc}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.card[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}"]})}return n})()}];let St=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[g.ez,x.Bz.forChild(Ot)]})}return n})(),wt=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[g.ez,d.u5,A.g,St]})}return n})()}}]);